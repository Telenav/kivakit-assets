@startuml

    !include lexakai.theme
    
    title "com.telenav.kivakit.resource"
    
    abstract BaseRepeater
    abstract BaseStringConverter
    
    interface UriIdentified
    interface ResourceFolder
    interface ResourceFolderResolver
    
    BaseStringConverter <|-- Resource.Converter
    class Resource.Converter
    {
        --(constructors)--
        +Converter(Listener)
    }
    
    BaseStringConverter <|-- ResourcePath.Converter
    class ResourcePath.Converter
    {
        --(constructors)--
        +Converter(Listener)
    }
    
    BaseStringConverter <|-- ResourceFolder.Converter
    class ResourceFolder.Converter
    {
        --(constructors)--
        +Converter(Listener)
    }
    
    BaseStringConverter <|-- ResourceList.Converter
    class ResourceList.Converter
    {
        --(constructors)--
        +Converter(Listener, Extension)
    }
    
    enum CopyMode
    {
        DO_NOT_OVERWRITE
        OVERWRITE
        UPDATE
    }
    
    BaseRepeater <|-- JarLauncher
    JarLauncher o-- JarLauncher.ProcessType : "launches process of type"
    JarLauncher "1" o-- "*" Resourceful : "retrieves jar from one of"
    JarLauncher o-- JarLauncher.RedirectTo : "determines output redirection"
    class JarLauncher
    {
        --
        +JarLauncher headless(boolean headless)
        +JarLauncher processType(ProcessType)
        +JarLauncher redirectTo(RedirectTo)
        --(collection)--
        +JarLauncher addJarSource(Resourceful resourced)
        --(command line parsing)--
        +JarLauncher arguments(StringList arguments)
        +JarLauncher arguments(String... arguments)
        --(lifecycle)--
        +Process run()
        --(network)--
        +JarLauncher enableDebuggerOnPort(int debugPort)
    }
    
    BaseRepeater <|-- Package
    ResourceFolder <|-- Package
    class Package
    {
        --(constructors)--
        +Package(PackagePath)
        --
        +Package child(String name)
        +Package packageFrom(Listener, Class<?> _packageType, String path)
        +Package packageFrom(PackagePath _package)
        +Package parent()
        --(collection)--
        +PropertyMap localizedProperties(Listener, Locale)
        --(path)--
        +PackagePath path()
    }
    
    interface Repeater
    Repeater <|-- PackageTrait
    interface PackageTrait
    {
        --
        +Resource packageResource(String path)
        +Package relativePackage(String path)
        --(path)--
        +PackagePath packagePath()
    }
    
    interface Packaged
    {
        --
        +Package _package()
    }
    
    enum JarLauncher.ProcessType
    {
        CHILD
        DETACHED
    }
    
    VariableMap <|-- PropertyMap
    class PropertyMap
    {
        --(constructors)--
        +PropertyMap()
        --
        +T get(String key, StringConverter<T>, T defaultValue)
        +T get(String key, StringConverter<T>)
        --(collection)--
        +void add(Object, PropertyFilter)
        +PropertyMap comment(String key, String comment)
        +PropertyMap create()
        +PropertyMap expandedWith(VariableMap<String> that)
        +PropertyMap load(Listener, InputStream)
        +PropertyMap load(Listener, PackagePath _package, String path)
        +PropertyMap load(Listener, Resource)
        +PropertyMap load(Listener, Class<?> _package, String path)
        +PropertyMap localized(Listener, PackagePath, Locale)
        +PropertyMap propertyMap(VariableMap<String> variables)
        --(conversion)--
        +File asFile(String key)
        +Folder asFolder(String key)
        +String asJson()
        --(write)--
        +void save(String heading, WritableResource)
        +void save(WritableResource)
    }
    
    interface ByteSized
    ByteSized <|-- Readable
    interface Readable
    {
        --(checks)--
        +boolean isReadable()
        --(primitive)--
        +Bytes sizeInBytes()
        --(read)--
        +InputStream onOpenForReading()
        +InputStream openForReading()
        +InputStream openForReading(ProgressReporter)
    }
    
    interface Readable
    Readable <|-- ReadableResource
    ReadableResource --> ResourceReader : "provides"
    interface ReadableResource
    {
        --
        +Charset charset()
        +Resource resource()
        --(conversion)--
        +StringResource asStringResource()
        --(filesystem)--
        +void copyTo(WritableResource destination, CopyMode, ProgressReporter)
        --(read)--
        +ResourceReader reader(ProgressReporter)
        +ResourceReader reader(ProgressReporter, Charset)
        +ResourceReader reader()
    }
    
    enum JarLauncher.RedirectTo
    {
        CONSOLE
        FILE
    }
    
    ResourceFolderResolver <|-- Package.Resolver
    class Package.Resolver
    {
    }
    
    interface ByteSized
    interface ChangedAt
    interface Modifiable
    interface ReadableResource
    interface Repeater
    interface ResourcePathed
    interface Resourceful
    interface StringSource
    interface UriIdentified
    ResourcePathed <|-- Resource
    Modifiable <|-- Resource
    ChangedAt <|-- Resource
    ByteSized <|-- Resource
    StringSource <|-- Resource
    ReadableResource <|-- Resource
    Repeater <|-- Resource
    Resourceful <|-- Resource
    UriIdentified <|-- Resource
    Resource --> Codec : "uses"
    interface Resource
    {
        --
        +Codec codec()
        +void dematerialize()
        +Resource resolve(Listener, ResourcePath)
        +Resource resolve(Listener, String identifier)
        +Resource resolve(Listener, ResourceIdentifier)
        --(checks)--
        +boolean isEmpty()
        +boolean isLocal()
        +boolean isMaterializable()
        +boolean isPackaged()
        +boolean isRemote()
        +boolean isSame(Resource that)
        --(command line parsing)--
        +ArgumentParser.Builder<ResourceList> argumentListParser(Listener, String description, Extension)
        +ArgumentParser.Builder<Resource> argumentParser(Listener, String description)
        +SwitchParser.Builder<ResourceList> resourceListSwitchParser(Listener, String name, String description, Extension)
        +SwitchParser.Builder<Resource> resourceSwitchParser(Listener, String name, String description)
        --(filesystem)--
        +void ensureExists()
        +boolean exists()
        +void safeCopyTo(File destination, CopyMode)
        +void safeCopyTo(Folder destination, CopyMode, ProgressReporter)
        +void safeCopyTo(Folder destination, CopyMode)
        +void safeCopyTo(File destination, CopyMode, ProgressReporter)
        --(functional)--
        +Resource materialized(ProgressReporter)
        --(identity)--
        +ResourceIdentifier identifier(String identifier)
    }
    
    interface UriIdentified
    UriIdentified <|-- ResourceFolder
    interface ResourceFolder
    {
        --
        +Resource resource(String name)
        --(checks)--
        +boolean isMaterialized()
        --(collection)--
        +List<? extends Resource> resources(Matcher<? super Resource>)
        +List<? extends Resource> resources()
        --(filesystem)--
        +ResourceFolder folder(String path)
        +ResourceFolderIdentifier identifier()
        +ResourceFolderIdentifier identifier(String identifier)
        +Folder materialize()
        +Folder materializeTo(Folder)
        +ResourceFolder resolve(Listener, String identifier)
        +ResourceFolder resolve(Listener, ResourceFolderIdentifier)
        +void safeCopyTo(Folder, CopyMode, ProgressReporter)
    }
    
    class ResourceFolderIdentifier
    {
        --(constructors)--
        +ResourceFolderIdentifier(String)
        --(filesystem)--
        +ResourceFolder resolve(Listener)
        --(identity)--
        +String identifier()
    }
    
    class ResourceIdentifier
    {
        --(constructors)--
        +ResourceIdentifier(String)
        --
        +Resource resolve(Listener)
        --(identity)--
        +String identifier()
    }
    
    ArrayList <|-- ResourceList
    ResourceList --> Resource : "contains"
    class ResourceList
    {
        --(constructors)--
        +ResourceList()
        +ResourceList(Extension)
        +ResourceList(Iterable<Resource>)
        --(collection)--
        +Count count()
        +ResourceList matching(Matcher<Resource>)
        +ResourceList matching(Extension)
        +ResourceList relativeTo(Folder)
        +void sortOldestToNewest()
        +Bytes totalSize()
        --(math)--
        +Resource largest()
        +Resource smallest()
    }
    
    StringPath <|-- ResourcePath
    UriIdentified <|-- ResourcePath
    class ResourcePath
    {
        --(constructors)--
        #ResourcePath(ResourcePath)
        #ResourcePath(StringList, List<String>)
        #ResourcePath(StringList, String, List<String>)
        --(checks)--
        +boolean hasScheme()
        --(collection)--
        +StringList schemes()
        --(filesystem)--
        +File asFile()
        +Extension extension()
        +FileName fileName()
        --(path)--
        +FilePath asFilePath()
        +ResourcePath normalized()
        +ResourcePath parseResourcePath(Listener, String path)
        +ResourcePath parseUnixResourcePath(Listener, String path)
        +ResourcePath resourcePath(StringPath)
        +SwitchParser.Builder<ResourcePath> resourcePathSwitchParser(Listener, String name, String description)
        +FilePath withExtension(Extension)
        +ResourcePath withSchemes(StringList schemes)
        +ResourcePath withoutSchemes()
    }
    
    interface Resourceful
    {
        --
        +Resource resource()
    }
    
    interface UriIdentified
    {
        --(network)--
        +URI uri()
    }
    
    interface Writable
    {
        --(checks)--
        +Boolean isWritable()
        --(write)--
        +OutputStream onOpenForWriting()
        +OutputStream openForWriting()
        +OutputStream openForWriting(ProgressReporter)
    }
    
    interface Resource
    interface Writable
    Resource <|-- WritableResource
    Writable <|-- WritableResource
    WritableResource --> ResourceWriter : "provides"
    interface WritableResource
    {
        --(write)--
        +PrintWriter printWriter()
        +ResourceWriter writer()
        +ResourceWriter writer(Charset)
    }
    
@enduml

