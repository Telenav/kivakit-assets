@startuml

    !include lexakai.theme
    
    title "com.telenav.kivakit.data.compression"
    
    interface Codec<Symbol>
    {
        --
        +void decode(ByteList input, SymbolConsumer<Symbol>)
        --(checks)--
        +boolean canEncode(Symbol)
        --(primitive)--
        +ByteList encode(ByteList output, SymbolProducer<Symbol>)
    }
    
    KryoTypes <|-- DataCompressionKryoTypes
    class DataCompressionKryoTypes
    {
        --(constructors)--
        +DataCompressionKryoTypes()
    }
    
    KryoUnitTest <|-- DataCompressionUnitTest
    class DataCompressionUnitTest
    {
        --
        #Symbols<String> fixedSymbolSet()
        #Symbols<String> randomStringSymbols(int minimum, int maximum, int minimumLength, int maximumLength)
        #void test(Codec<String>, List<String> symbols)
        #void testDecode(Codec<String>, ByteList data, List<String> expected)
        --(collection)--
        #PropertyMap properties(String name)
        --(primitive)--
        #ByteList encode(Codec<String>, List<String> values)
        #Symbols<Character> randomCharacterSymbols(int minimum, int maximum)
    }
    
    enum SymbolConsumer.Directive
    {
        CONTINUE
        STOP
    }
    
    interface SymbolConsumer<Symbol>
    {
        --
        +Directive onEscape(ByteList input)
        --(iteration)--
        +Directive next(int ordinal, Symbol)
    }
    
    interface SymbolProducer<Symbol>
    {
        --
        +Symbol get(int ordinal)
        +void onEscape(ByteList output, Symbol)
        +SymbolProducer<Symbol> singleton(Symbol)
        --(collection)--
        +SymbolProducer<Symbol> fromList(List<Symbol> symbols)
        +int size()
        --(lifecycle)--
        +void reset()
    }
    
@enduml

